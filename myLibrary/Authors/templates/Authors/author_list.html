{% extends 'base.html' %}

{% block content %}
    <h1>Lista autor√≥w:</h1>

    <table class="table table-bordered table-hover">
        <thead class = "thead-light">
            <tr>
              <th scope="col">#</th>
              <th scope="col">First Name</th>
              <th scope="col">Last Name</th>
              <th scope="col">email</th>
            </tr>
        </thead>
        {% for author in object_list %}
            <tr>
                <td> {{ author.id }} </td>
                <td> {{ author.first_name }} </td>
                <td> {{ author.last_name }} </td>
                <td> {{ author.email }} </td>
            </tr>
        {% empty %}
            <h1>No authors yet.</h1>
        {% endfor %}
    </table>

    <div class = "row">
        <div class = "col">
            <button id = "start" class = "btn btn-lg btn-primary"> Pobieraj czas z serwera </button>
            <button id = "stop" class = "btn btn-lg btn-danger"> Zatrzymaj pobieranie </button>
            <h2 id="time-area">Aktualny czas serwera: </h2>
        </div>
    </div>
    <script>
        var chatSocket;

        $(document).ready(function(){
            $("#start").click(function(){
                alert("start");

                chatSocket = new WebSocket(
                'ws://' + window.location.host +
                '/ws/authorTime/');

                chatSocket.onclose = function(e) {
                console.error('Chat socket closed unexpectedly');
                };
            });
        });

        $(document).ready(function(){
            $("#stop").click(function(){
                chatSocket.close();
            });
        });
    </script>
{% endblock %}